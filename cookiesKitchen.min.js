/*
  * Cookies Kitchen
  * https://github.com/gobalo/Cookies-Kitchen
  *
  * Copyright 2014 Góbalo
  * Released under the MIT license
*/
var cookiesKitchen;window.console=null!==window.console?window.console:{log:function(){},info:function(){}},function(e){var o,i;cookiesKitchen={settings:{apiUrl:"http://gobalo.es/kwsn/api/cookiesKitchen",cookieName:"eatMe",cookieVal:"soGood",cookieTime:100},tryCount:3,cookie:document.cookie,styles:{bg:"#cookies-alert-bg{top:0;left:0;background:black;opacity:0.7;z-index:999;position:fixed;width:100%;height:100%}",1:"#cookies-alert{top:0;left:0;position:fixed;z-index:999999;padding: 10px 0px;width: 100%;background-color:#CA303C;border-bottom:solid 1px #a72731;box-shadow: 0px 0px 2px #a72731;}#cookies-alert p{width: 100%;text-align: center;font-family:'Open Sans',sans-serif,Arial;font-size:14px;margin: 0;color: #fff;}#cookies-alert p a{color:#fff}#cookies-alert #close{font-weight:900;text-shadow: 1px 1px 2px #bbb;cursor:pointer;position:fixed;right: 20px;}",2:"#cookies-alert{bottom:10px;right:20px;position:fixed;z-index:999999;padding:8px 0px;width:400px;background-color:#CA303C;border-radius:4px;}#cookies-alert p{font-family:'Open Sans',sans-serif,Arial;font-size:13px;margin: 0px 20px 0 20px;text-align:justify;color:#fff;}#cookies-alert p a{color:#fff}#cookies-alert #close{cursor:pointer;float:right;text-decoration:underline}"},init:function(){console.log("Cookies-Kitchen: https://github.com/gobalo/Cookies-Kitchen"),console.log("Calentando el horno...");var o=this,i=document.getElementsByTagName("script"),t=i[i.length-1],s=e(t);this.cookie=document.cookie,e(i).each(function(){e(this).attr("data-domain")&&(t=this,s=e(this))}),this.settings.ext=s.attr("data-extension")||"",this.settings.domain=document.domain.replace(/^(w{3}\.)*([a-zA-Z]+)\.*.*/,"$2")+"_"+this.settings.ext,this.settings.name=s.attr("data-name")||this.settings.domain,this.settings.url=s.attr("data-url"),this.settings.animation=s.attr("data-animation"),this.settings.block="true"===s.attr("data-block")?!0:!1,this.settings.style=s.attr("data-style")||1,this.getCookie(this.settings.cookieName)||(this.showAlert(),e.ajax({url:o.settings.apiUrl,dataType:"jsonp",data:{cFn:"cookiesKitchen.cookMe",domain:o.settings.domain},timeout:3e3,error:function(e,i){"timeout"===i&&o.cookMe()}}))},setCookie:function(e,o,i){var t=new Date;t.setDate(t.getDate()+i),value=escape(o)+(null==i?"":"; expires="+t.toUTCString()),document.cookie=e+"="+o,this.cookie=document.cookie},getCookie:function(e){var o=this.cookie,i=o.indexOf(" "+e+"=");if(-1===i&&(i=o.indexOf(e+"=")),-1===i)o=null;else{i=o.indexOf("=",i)+1;var t=o.indexOf(";",i);-1===t&&(t=o.length),o=unescape(o.substring(i,t))}return o},checkCookie:function(e,o){var i=new RegExp(e+"="+o+"(;*)","g");return this.cookie.match(i)},showAlert:function(){if(!o&&!i){switch(i=e('<div id="cookies-alert-bg"></div>').hide(),o=e('<div id="cookies-alert"></div>').hide(),this.settings.style){case"1":n=e('<span id="close" style="top:10px">X</span>');break;case"2":n=e('<span id="close">Cerrar</span>');break;default:n=e('<span id="close" style="top:10px">X</span>')}n.hide();var t=""!==this.settings.url?'<a href="'+this.settings.url+'" target="_blank">Política de Cookies</a>':"Política de Cookies",s=e("<p><strong>"+this.settings.name+"</strong> utiliza cookies propias y de terceros para mejorar tu experiencia de navegación y realizar tareas de análisis. Si continúas navegando consideramos que aceptas el uso de cookies.<br/>Por favor, revisa nuestra "+t+".</p>"),n=n.click(this.hideAlert);o.append("<style>"+this.styles.bg+this.styles[this.settings.style]+"</style>").append(s.append(n)),e("body").prepend(o).prepend(i),e(document).trigger("cooking-cookie")}switch(this.settings.block&&i.fadeIn(),this.settings.animation){case"slide":o.slideDown();break;case"fade":o.fadeIn();break;default:o.fadeIn()}n.fadeIn()},hideAlert:function(){switch(e(document).trigger("burning-cookie"),e("#cookies-alert p span#close").fadeOut(),cookiesKitchen.settings.outAnim){case"slide":o.slideUp();break;case"fade":o.fadeOut();break;default:o.fadeOut()}cookiesKitchen.settings.block&&i.fadeOut(),cookiesKitchen.makeMeBurn()},cookMe:function(e){void 0===e&&(e={burnedCookies:"0"}),"0"!==e.burnedCookies?(cookiesKitchen.hideAlert(),!cookiesKitchen.getCookie(cookiesKitchen.settings.cookieName)&&cookiesKitchen.checkCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal)&&cookiesKitchen.setCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal,cookiesKitchen.settings.cookieTime)):cookiesKitchen.showAlert()},makeMeBurn:function(o){void 0===o&&(o={burnedCookies:"0"}),cookiesKitchen.setCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal,cookiesKitchen.settings.cookieTime),"0"===o.burnedCookies&&this.tryCount>0&&e.ajax({url:self.settings.apiUrl,dataType:"jsonp",data:{cFn:"cookiesKitchen.makeMeBurn",domain:cookiesKitchen.settings.domain},complete:function(){cookiesKitchen.tryCount--}})}},cookiesKitchen.init()}(jQuery);