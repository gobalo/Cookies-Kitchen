/*
  * Cookies Kitchen
  * https://github.com/gobalo/Cookies-Kitchen
  *
  * Copyright 2014 Góbalo
  * Released under the MIT license
*/
var cookiesKitchen;!function(e,t,i,o){t.console=null!==t.console?t.console:{log:function(){},info:function(){}},cookiesKitchen={settings:{apiUrl:"http://gobalo.es/kwsn/api/cookiesKitchen",cookieName:"eatMe",cookieVal:"soGood",cookieTime:100},html:{$advice:null,$content:null,$bg:null,$close:null},tryCount:3,cookie:i.cookie,styles:{bg:"#cookies-alert-bg{top:0;left:0;background:black;opacity:0.7;z-index:999;position:fixed;width:100%;height:100%}",1:"#cookies-alert{top:0;left:0;position:fixed;z-index:999999;padding: 10px 0px;width: 100%;background-color:#CA303C;border-bottom:solid 1px #a72731;box-shadow: 0px 0px 2px #a72731;}#cookies-alert p{width: 100%;text-align: center;font-family:'Open Sans',sans-serif,Arial;font-size:14px;margin: 0;color: #fff;}#cookies-alert p a{color:#fff}#cookies-alert #close{font-weight:900;text-shadow: 1px 1px 2px #bbb;cursor:pointer;position:fixed;right: 20px;}",2:"#cookies-alert{bottom:10px;right:20px;position:fixed;z-index:999999;padding:8px 0px;width:400px;background-color:#CA303C;border-radius:4px;}#cookies-alert p{font-family:'Open Sans',sans-serif,Arial;font-size:13px;margin: 0px 20px 0 20px;text-align:justify;color:#fff;}#cookies-alert p a{color:#fff}#cookies-alert #close{cursor:pointer;float:right;text-decoration:underline}"},init:function(){console.log("Cookies-Kitchen: https://github.com/gobalo/Cookies-Kitchen"),console.log("Calentando el horno...");var s=this,n=i.getElementsByTagName("script"),a=n[n.length-1],c=e(a);this.cookie=i.cookie,e(n).each(function(){"cookiesKitchen"===this.id&&e(this).data("name")!==o&&(t.a=this,a=this,c=e(this))}),this.settings.ext=c.attr("data-extension")||"",this.settings.domain=i.domain+"_"+this.settings.ext,this.settings.name=c.attr("data-name")||this.settings.domain,this.settings.url=c.attr("data-url"),this.settings.animation=c.attr("data-animation"),this.settings.block="true"===c.attr("data-block")?!0:!1,this.settings.style=c.attr("data-style")||1,this.getCookie(this.settings.cookieName)||(this.showAlert(),e.ajax({url:this.settings.apiUrl,dataType:"jsonp",data:{cFn:"cookiesKitchen.cookMe",domain:this.settings.domain},timeout:3e3,error:function(){"timeout"===arguments[1]&&s.cookMe()}}))},setCookie:function(e,t,o){var s=new Date;s.setDate(s.getDate()+o),t=encodeURIComponent(t)+(null===o?"":"; expires="+s.toUTCString()),i.cookie=e+"="+t,this.cookie=i.cookie},getCookie:function(e){var t=this.cookie,i=t.indexOf(" "+e+"=");if(-1===i&&(i=t.indexOf(e+"=")),-1===i)t=null;else{i=t.indexOf("=",i)+1;var o=t.indexOf(";",i);-1===o&&(o=t.length),t=decodeURIComponent(t.substring(i,o))}return t},checkCookie:function(e,t){var i=new RegExp(e+"="+t+"(;*)","g");return this.cookie.match(i)},showAlert:function(){if(!this.html.$advice&&!this.html.$bg){switch(this.html.$bg=e('<div id="cookies-alert-bg"></div>').hide(),this.html.$advice=e('<div id="cookies-alert"></div>').hide(),this.settings.style){case"1":this.html.$close=e('<span id="close" style="top:10px">X</span>');break;case"2":this.html.$close=e('<span id="close">Cerrar</span>');break;default:this.html.$close=e('<span id="close" style="top:10px">X</span>')}this.html.$close.hide();var t=""!==this.settings.url?'<a href="'+this.settings.url+'" target="_blank">Política de Cookies</a>':"Política de Cookies";this.html.$content=e("<p><strong>"+this.settings.name+"</strong> utiliza cookies propias y de terceros para mejorar tu experiencia de navegación y realizar tareas de análisis. Si continúas navegando consideramos que aceptas el uso de cookies.<br/>Por favor, revisa nuestra "+t+".</p>"),this.html.$close.click(function(){cookiesKitchen.hideAlert()}),this.html.$advice.append("<style>"+this.styles.bg+this.styles[this.settings.style]+"</style>").append(this.html.$content.append(this.html.$close)),e("body").prepend(this.html.$advice).prepend(this.html.$bg),e(i).trigger("cooking-cookie")}switch(this.settings.block&&this.html.$bg.fadeIn(),this.settings.animation){case"slide":this.html.$advice.slideDown();break;case"fade":this.html.$advice.fadeIn();break;default:this.html.$advice.fadeIn()}this.html.$close.fadeIn()},hideAlert:function(){switch(e(i).trigger("burning-cookie"),this.html.$close.fadeOut(),cookiesKitchen.settings.outAnim){case"slide":this.html.$advice.slideUp();break;case"fade":this.html.$advice.fadeOut();break;default:this.html.$advice.fadeOut()}cookiesKitchen.settings.block&&this.html.$bg.fadeOut(),cookiesKitchen.makeMeBurn()},cookMe:function(e){e===o&&(e={burnedCookies:"0"}),"0"!==e.burnedCookies?(cookiesKitchen.hideAlert(),!cookiesKitchen.getCookie(cookiesKitchen.settings.cookieName)&&cookiesKitchen.checkCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal)&&cookiesKitchen.setCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal,cookiesKitchen.settings.cookieTime)):cookiesKitchen.showAlert()},makeMeBurn:function(t){t===o&&(t={burnedCookies:"0"}),cookiesKitchen.setCookie(cookiesKitchen.settings.cookieName,cookiesKitchen.settings.cookieVal,cookiesKitchen.settings.cookieTime),"0"===t.burnedCookies&&this.tryCount>0&&e.ajax({url:this.settings.apiUrl,dataType:"jsonp",data:{cFn:"cookiesKitchen.makeMeBurn",domain:cookiesKitchen.settings.domain},complete:function(){cookiesKitchen.tryCount--}})}},cookiesKitchen.init()}(jQuery,window,document);